!function(){var t=t||this,a=t.nx||require("next-js-core2"),i=a.Validator||require("next-validator"),e=t.Q||require("q"),r=a.declare("nx.ValidateStrategy",{methods:{init:function(t){this._validators=t||[i],this._cache={}},destroy:function(){this._validators=null,this._cache=null},addAll:function(t,a){var i=this._cache[t]=this._cache[t]||[];this._cache[t]=i.concat(a)},add:function(t,a){var i=this._cache[t]=this._cache[t]||[];i.push(a),this._cache[t]=i},validate:function(t,i){var r=this,n=[];return e.Promise(function(e,c){return a.each(t,function(t,e){var c=r.getStrategies[e];a.each(c,function(t,a){var c=r.getStrategyValidator(a.validator),o=r.getValidator(c.validator),l=o.call(null,i[e],a.data);c.invert?l||n.push(a):l&&n.push(a)})}),n.length?c(n):e(!0)})},getStrategyValidator:function(t){return 0===t.indexOf("!")?{validator:t.slice(1),invert:!0}:{validator:t,invert:!1}},getStrategies:function(t){return this._cache[t]},getValidator:function(t){var i=(this._validators,null);return a.each(this._validators,function(e,r){if(a.isFunction(r[t]))return i=r[t],a.BREAKER}),i||a.error("Invalid validtor: ["+t+"]")}}});"undefined"!=typeof module&&module.exports&&(module.exports=r)}();